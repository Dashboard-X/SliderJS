function getScriptPath(e){var t=document.getElementsByTagName("script"),n="";for(var r=0;r<t.length;r++)t[r].src.match(e)&&(n=t[r].src);return n.split("?")[0].split("/").slice(0,-1).join("/")+"/"}function getUrlVars(e){var t=[],n,r,i=e.toString();i.match("&#038;")?i=i.replace("&#038;","&"):i.match("&#38;")?i=i.replace("&#38;","&"):i.match("&amp;")&&(i=i.replace("&amp;","&"));i.match("#")&&(i=i.split("#")[0]);r=i.slice(i.indexOf("?")+1).split("&");for(var s=0;s<r.length;s++){n=r[s].split("=");t.push(n[0]);t[n[0]]=n[1]}return t}function getLinkAndIframe(){var e={},t=document.getElementById("embed-source-url"),n=document.getElementById("embed-width"),r=document.getElementById("embed-height"),i=document.getElementById("embed-maptype"),s=document.getElementById("embed-language"),o=document.getElementById("embed_code"),u=document.getElementById("embed-font"),a=document.getElementById("embed-wordpressplugin"),f=document.getElementById("embed-startatend"),l=document.getElementById("embed-hashbookmark"),c=document.getElementById("embed-startatslide"),h=!1,p=!1,d,v,m,g,y;t.value.match("docs.google.com")?y=getUrlVars(t.value).key:t.value==""?y="0Agl_Dv6iEbDadHdKcHlHcTB5bzhvbF9iTWwyMmJHdkE":y=t.value;f.checked&&(h=!0);l.checked&&(p=!0);g="[timeline ";n.value>0&&(g+="width='"+n.value+"' ");r.value>0&&(g+="height='"+n.value+"' ");g+="font='"+u.value+"' ";g+="maptype='"+i.value+"' ";g+="lang='"+s.value+"' ";g+="src='"+t.value+"' ";h&&(g+="start_at_end='"+h+"' ");p&&(g+="hash_bookmark='"+p+"' ");parseInt(c.value,10)>0&&(g+="&start_at_slide='"+parseInt(c.value,10)+"' ");g+="]";e.wordpress=g;m=embed_path+"?source="+y;m+="&font="+u.value;m+="&maptype="+i.value;m+="&lang="+s.value;h&&(m+="&start_at_end="+h);p&&(m+="&hash_bookmark="+p);parseInt(c.value,10)>0&&(m+="&start_at_slide="+parseInt(c.value,10));n.value>0&&(m+="&width="+n.value);r.value>0&&(m+="&height="+r.value);d="<iframe src='"+m+"'";n.value>0&&(d+=" width='"+n.value+"'");r.value>0&&(d+=" height='"+r.value+"'");d+=" frameborder='0'></iframe>";e.iframe=d;e.link=m;a.checked?e.copybox=g:e.copybox=d;return e}function updateEmbedCode(e,t){var n=document.getElementById("embed_code"),r=getLinkAndIframe();n.value=r.copybox;$("#preview-embed-link").attr("href",r.link);$("#preview-embed-iframe").html(r.iframe)}if(typeof embed_path=="undefined"||typeof embed_path=="undefined"){var embed_path=getScriptPath("timeline-embed-generator.js").split("js/")[0];embed_path.match("http")?embed_path=embed_path:embed_path+="index.html"};